<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const promise1 = new Promise((resolve) => {
        setTimeout(() => {
          resolve("promise 1 resolved");
        }, 2000);
      });
      const promise2 = new Promise((resolve) => {
        setTimeout(() => {
          resolve("promise 2 resolved");
        }, 2000);
      });
      const promise3 = (params) => {
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve(params);
          }, 5000);
        });
      };

      const callerTwo = async () => {
        // try {
        //   const result = await promise1;
        //   console.log(result);
        //   return result;
        // } catch (err) {
        //   console.log(err);
        // }

        promise1.then((res) => {
          console.log(res);
          return res;
        });
      };

      const callerOne = async () => {
        console.log("foo");
        const promiseResult = await callerTwo();
        // console.log(promiseResult);
        console.log("bar");
      };

      // console.log("start");
      // callerOne();
      // console.log("end");

      const promiseCaller = async () => {
        return await promise1;
        // return result;
      };

      const callFn = async () => {
        console.log("start");
        promiseCaller().then((res) => {
          promise3(`result of ${res}`).then((response) => {
            console.log(res, response);
          });
        });
        // const promise1Result = await promiseCaller();
        // const promise3Result = await promise3(`result of ${promise1Result}`);
        // console.log(promise1Result);
        // console.log(promise3Result);
      };
      callFn();

      const aaa = async () => {
        let number = 10;
        promise1.then((res) => {
          console.log(res);
          // return (number += 5);
          return new Promise((resolve, reject) => {
            number += 5;
            console.log(number);
          });
        });
      };
      // aaa();

      // const coba = promiseCaller().then((res) => {
      //   console.log(res);
      //   return (number += 5);
      //   console.log(number);
      //   // return new Promise((resolve, reject) => {
      //   //   number += 5;
      //   // });
      // });

      // console.log("start");
      // promise1.then((res) => {
      //   console.log(res);
      //   promise3(`result of ${res}`).then((res) => {
      //     console.log(res);
      //   });
      // });
      // console.log("end");

      // const anotherCaller = async () => {
      //   console.log("start");

      //   const result = await promise1;
      //   console.log(result);
      //   callFn().then((res) => {
      //     console.log("end");
      //   });
      // };

      // anotherCaller();
    </script>
  </body>
</html>
